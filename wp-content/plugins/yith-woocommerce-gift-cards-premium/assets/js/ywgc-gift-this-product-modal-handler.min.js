!function(e){var t;function o(t,o,i){t.show().addClass("animated "+o),t.one("animationend",function(){t.removeClass("animated "+o),void 0!==i&&i()})}"undefined"!=typeof ywgc_gift_this_product_data&&(e(function(){-1<window.location.href.indexOf("yith-gift-this-product-form=yes")&&setTimeout(function(){e("#give-as-present").click();var t=document.location.href;window.history.pushState({},"",t.split("?")[0])},100)}),(t=function(t){t.length&&(this.self=t,this.wrap=t.find(".yith-ywgc-gift-this-product-modal-wrapper"),this.popup=t.find(".yith-ywgc-gift-this-product-modal"),this.content=t.find(".yith-ywgc-gift-this-product-modal-content-wrapper"),this.overlay=t.find(".yith-ywgc-gift-this-product-modal-overlay"),this.blocked=!1,this.opened=!1,this.additional=!1,this.animationIn=this.popup.attr("data-animation-in"),this.position(null),e(this.popup).on("click",function(t){t.stopPropagation()}),e(window).on("resize",{obj:this},this.position),e(document).on("click","#give-as-present",{obj:this,additional:!1},this.open),e(document).on("click",".yith-ywgc-gift-this-product-modal-overlay.close-on-click",function(t){t.preventDefault(),e(".yith-ywgc-gift-this-product-modal-wrapper .yith-ywgc-gift-this-product-modal-close").click()}),this.popup.on("click",".yith-ywgc-gift-this-product-modal-close",{obj:this},this.close))}).prototype.position=function(t){var t=(null==t?this:t.data.obj).popup,o=e(window).width(),i=e(window).height(),i=o-40>ywgc_gift_this_product_data.popupWidth?i/10+"px":"0",o=o-40>ywgc_gift_this_product_data.popupWidth?ywgc_gift_this_product_data.popupWidth+"px":"auto";t.css({"margin-top":i,"margin-bottom":i,width:o})},t.prototype.block=function(){this.blocked||(this.popup.block({message:null,overlayCSS:{background:"#fff url("+ywgc_gift_this_product_data.loader+") no-repeat center",opacity:.5,cursor:"none"}}),this.blocked=!0)},t.prototype.unblock=function(){this.blocked&&(this.popup.unblock(),this.blocked=!1)},t.prototype.open=function(t){t.preventDefault();t=t.data.obj;t.opened||(t.opened=!0,t.loadTemplate("gift-this-product-template",{title:""}),t.self.fadeIn("slow"),o(t.overlay,"fadeIn"),o(t.popup,t.animationIn),e("html, body").addClass("yith-ywgc-gift-this-product-modal-opened"),t.wrap.css("position","fixed"),t.overlay.css("position","fixed"),t.overlay.css("z-index","1"),t.wrap.find(".ywgc-choose-design-preview .ywgc-design-list li.default-image-li .ywgc-preset-image img").click(),e(document).trigger("yith_ywgc_gift_this_product_modal_opened",[t.popup,t]))},t.prototype.loadTemplate=function(t,o){t=wp.template(t);this.showTemplate(t(o))},t.prototype.showTemplate=function(t){this.content.hide().html(t).fadeIn("slow"),e(document).trigger("yith_ywgc_gift_this_product_modal_template_loaded",[this.popup,this])},t.prototype.close=function(t){t.preventDefault();t=t.data.obj;t.additional=!1,t.opened=!1,t.self.fadeOut("slow"),e("html, body").removeClass("yith-ywgc-gift-this-product-modal-opened"),e(document).trigger("yith_ywgc_gift_this_product_modal_template_closed",[t.popup,t]),e(".type-product").hasClass("product-type-booking")&&location.reload()},e(function(){new t(e(document).find("#yith-ywgc-gift-this-product-modal-container"))}))}(jQuery);